---
title: "ä»Šæ›´ã ã‘ã©Substrateã®ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ä½œæˆãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã£ã¦ã¿ã‚‹"
emoji: "ğŸ¦”"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["substrate", "rust", "blockchain", "crypto"]
published: true
published_at: 2023-12-05
publication_name: noplan_inc
---

## ã¯ã˜ã‚ã«
ã“ã‚“ã«ã¡ã¯ã€œï¼çš†æ§˜ã„ã‹ãŒãŠéã”ã—ã§ã—ã‚‡ã†ã‹ï¼Ÿã€€no plan inc. CTOã® [@serinuntius](https://twitter.com/_serinuntius) ã§ã™ã€‚
ã“ã‚Œã¯[no plan inc.ã® Advent Calendar 2023](https://qiita.com/advent-calendar/2023/noplan_inc)ã®5æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚


Rustã‚’ã„ã„æ„Ÿã˜ã«å‹‰å¼·ã—ãŸã®ã§ã€ä»Šæ›´ã§ã™ãŒSubstrateã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã£ã¦ã¿ã¾ã—ãŸã€‚
Substrateã¯Rustã‚’ä½¿ã£ã¦æ›¸ã‹ã‚ŒãŸãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã€`Polkadot` ã‚„ `Astar` ãªã©ãŒSubstrateã§ä½œã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

## ç’°å¢ƒæ§‹ç¯‰

- Rustã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- Nodeã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- yarnã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«


ã“ã®è¾ºã‚Šã¯ã‚ã‚‰ã‹ã˜ã‚æ¸ˆã¾ã›ã¦ãŠã„ã¦ãã ã•ã„ã€‚

## ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
```bash
git clone https://github.com/substrate-developer-hub/substrate-node-template

cd substrate-node-template

git switch -c my-learning-branch-2023-11-07

cargo build --release
# Finished release [optimized] target(s) in 7m 15s
```


<!-- textlint-disable -->

åˆã‚ã¦Rustã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’ã—ãŸæ–¹ã¯æ™‚é–“ã‹ã‹ã‚Šã™ãã€œã£ã¦æ€ã†ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ãŒã€ãã‚Œã¯ã‚¼ãƒ­ã‹ã‚‰ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã®å ´åˆã§ã€2å›ç›®ä»¥é™ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒåŠ¹ãã®ã§æ—©ã„ã§ã™ã€‚

<!-- textlint-enable -->

## èµ·å‹•ã™ã‚‹
```bash

./target/release/node-template --dev
```

<!-- textlint-disable -->

Macã®å ´åˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è¨±å¯ã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒå‡ºã‚‹ã¨æ€ã†ã®ã§ã€è¨±å¯ã—ã¦ãã ã•ã„ã€‚
![](https://storage.googleapis.com/zenn-user-upload/462e53a5d9df-20231107.png)

<!-- textlint-enable -->

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

åˆ¥çª“ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```bash
git clone https://github.com/substrate-developer-hub/substrate-front-end-template

cd substrate-front-end-template
yarn
```

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’èµ·å‹•ã™ã‚‹

```bash
yarn start
http://localhost:8000/substrate-front-end-template
```

ã“ã‚“ãªæ„Ÿã˜ã®ç”»é¢ãŒå‡ºã¦ããŸã‚‰æˆåŠŸã§ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/d85c06f4d052-20231107.png)



ã“ã®ã‚µã‚¤ãƒˆã¯ç°¡æ˜“çš„ãªã‚¦ã‚©ãƒ¬ãƒƒãƒˆãŒå†…è”µã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã€ç”»é¢å³ä¸Šã®ã¨ã“ã‚ã‹ã‚‰ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/7402a5abe5e0-20231107.png)


## é€é‡‘ã—ã¦ã¿ã‚‹

`Transfer` ãƒ‘ãƒãƒ«ã®ã¨ã“ã‚ã§é€é‡‘ã§ãã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/a62af4cfca4e-20231107.png)

è©¦ã—ã«daveã¸3000ãƒˆãƒ¼ã‚¯ãƒ³ã‚’é€é‡‘ã—ã¦ã¿ã¾ã™ã€‚

txhashãŒè¡¨ç¤ºã•ã‚Œã€balanceãŒå¤‰æ›´ã•ã‚Œã¦ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/4fea973ea9a7-20231107.png)


## ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ ã—ã¦ã¿ã‚‹
æœ¬å½“ã¯ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ãã®ã¾ã¾é€²ã‚ã‚‹ã¨ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦ã‚‚ã†ï¼‘ã¤ã®ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã¨ã“ã‚ã‹ã‚‰å§‹ã¾ã‚‹ã®ã§ã™ãŒã€ä»Šå›ã¯ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã™ã€‚

### ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«ãƒ‘ãƒ¬ãƒƒãƒˆã‚’è¿½åŠ ã™ã‚‹

`substrate-node-template` ã¯ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚’é–‹ç™ºã™ã‚‹ãŸã‚ã®å‡ºç™ºç‚¹ã¨ã—ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®FRAMEé–‹ç™ºãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å«ã‚€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ç’°å¢ƒã‚’æä¾›ã—ã¾ã™ã€‚

ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€ãã†ã—ãŸãƒ©ãƒ³ã‚¿ã‚¤ãƒ ç’°å¢ƒã«æ–°ã—ã„ãƒ‘ãƒ¬ãƒƒãƒˆã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã®åŸºæœ¬çš„ãªã‚¹ãƒ†ãƒƒãƒ—ã‚’èª¬æ˜ã—ã€ãã®ãƒ—ãƒ­ã‚»ã‚¹ãŒã©ã‚“ãªæ„Ÿã˜ã§ä¸€èˆ¬çš„ã«é©ç”¨å¯èƒ½ã§ã‚ã‚‹ã‹ã‚’ç¤ºã—ãªãŒã‚‰ã‚‚ã€ç‰¹å®šã®ãƒ‘ãƒ¬ãƒƒãƒˆãŒè¦æ±‚ã™ã‚‹ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªè¨­å®šã‚„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã€å‹ã«ã¤ã„ã¦ã‚‚æ³¨æ„ã‚’æ‰•ã†å¿…è¦ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚


å„ãƒ‘ãƒ¬ãƒƒãƒˆã¯ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³å†…ã§ç‰¹å®šã®æ©Ÿèƒ½ã‚’æœãŸã™ãŸã‚ã«ã€ç‹¬è‡ªã®æ§‹æˆè¦ç´ ã‚’å¿…è¦ã¨ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®è¦ç´ ã¯ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ãŒãã®èƒ½åŠ›ã‚’æœ€å¤§é™ç™ºæ®ã™ã‚‹ãŸã‚ã«æœ€é©åŒ–ã•ã‚Œã‚‹ã¹ãé‡è¦ãªéƒ¨åˆ†ã§ã™ã€‚

### runtimeã®Cargo.tomlã‚’ç·¨é›†ã™ã‚‹
```toml
[dependencies]
pallet-nicks = { version = "4.0.0-dev", default-features = false, git = "https://github.com/paritytech/substrate.git", branch = "polkadot-v1.0.0" }
```


åŒãƒ•ã‚¡ã‚¤ãƒ«ã® `features` ã« `pallet-nicks/std` ã‚’è¿½åŠ ã™ã‚‹ã€‚

```toml
[features]
default = ["std"]
std = [
  ...
  "pallet-aura/std",
  "pallet-balances/std",
  "pallet-nicks/std",
  ...
]
```

ã¡ã‚ƒã‚“ã¨ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã§ãã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã€‚

```bash
cargo check -p node-template-runtime --release
```

`Finished release [optimized] target(s) in 2m 16s` å¤§ä¸ˆå¤«ãã†ã€‚

### `runtime/src/lib.rs` ã‚’ç·¨é›†ã™ã‚‹

`impl pallet_balances::Config for Runtime {` ã®ä¸‹ã«ä»¥ä¸‹ã‚’è¿½åŠ ã™ã‚‹ã€‚

```rust
impl pallet_nicks::Config for Runtime {
	type Currency = Balances;
	type ReservationFee = ConstU128<100>;
	type Slashed = ();
	type ForceOrigin = frame_system::EnsureRoot<AccountId>;
	type MinLength = ConstU32<8>;
	type MaxLength = ConstU32<32>;
	type RuntimeEvent = RuntimeEvent;
}
```

lib.rsã®ã©ã“ã‹ã§å‘¼ã°ã‚Œã¦ã„ã‚‹ `construct_runtime!` ã®ä¸­ã« `Nicks: pallet_nicks,` ã‚’è¿½åŠ ã™ã‚‹ã€‚

```rust
construct_runtime!(
	pub struct Runtime {
		System: frame_system,
		Timestamp: pallet_timestamp,
		Aura: pallet_aura,
		Grandpa: pallet_grandpa,
		Balances: pallet_balances,
		TransactionPayment: pallet_transaction_payment,
		Sudo: pallet_sudo,
		TemplateModule: pallet_template,
        // ã“ã‚Œã ã‘è¿½åŠ 
		Nicks: pallet_nicks,
	}
);
```

checkã—ã¦ã€å•é¡Œãªã‘ã‚Œã°ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã€‚
```bash
cargo check -p node-template-runtime --release
cargo build -p node-template-runtime --release
```


### ãƒãƒ¼ãƒ‰ã‚’èµ·å‹•ã™ã‚‹

```bash
./target/release/node-template --dev
```


### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’èµ·å‹•ã™ã‚‹

```bash
cd substrate-front-end-template
yarn start
```

### ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’ç™»éŒ²ã™ã‚‹
`http://localhost:8000/substrate-front-end-template` ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€`Pallet Interactor` ãƒ‘ãƒãƒ«ã«è¡Œãã€‚

![](https://storage.googleapis.com/zenn-user-upload/2e97bd884854-20231107.png)

Extrinsicã‚’é¸æŠã—ã¦ã€`nicks` ã‚’é¸æŠã—ã€ `setName` ã‚’é¸æŠã™ã‚‹ã€‚

é©å½“ã«åå‰ã‚’å…¥ã‚Œã¦ã€ `signed` ã§é€ä¿¡ã™ã‚‹ã€‚

### ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’ç¢ºèªã™ã‚‹
Interaction Type `Query` ã‚’é¸æŠã—ã€`nicks` ã‚’é¸æŠã—ã€ `nameOf` ã‚’é¸æŠã™ã‚‹ã€‚ãã“ã§ã•ã£ãã®callerã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å…¥ã‚Œã¦ã€é€ä¿¡ã™ã‚‹ã€‚

ç§ã¯aliceã§ç™»éŒ²ã—ãŸã®ã§ã€ `5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY` ã‚’å…¥ã‚Œã¦é€ä¿¡ã™ã‚‹ã€‚

ãã†ã™ã‚‹ã¨è¬ã®æ–‡å­—åˆ—ã¨100ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

```json
["0x62726f6164636173746572",100]
```

![](https://storage.googleapis.com/zenn-user-upload/375b82341930-20231107.png)

å…ˆé ­ã®æ–‡å­—åˆ—ã¯asciiã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ–‡å­—åˆ—ãªã®ã§ã€asciiã§ãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚Œã°å…ƒã®æ–‡å­—åˆ—ãŒè¦‹ã‚‰ã‚Œã¾ã™ã€‚

```bash
$ echo 0x62726f6164636173746572 | xxd -r -p
broadcaster
```
 
`100`ã¯MaxLengthã§ã™ã­ã€‚

## ã¾ã¨ã‚
Substrateã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã£ã¦ã¿ã¾ã—ãŸãŒã€æ€ã£ãŸä»¥ä¸Šã«ç°¡å˜ã«ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚
çš†ã•ã‚“ã‚‚æ˜¯éãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

## no planæ ªå¼ä¼šç¤¾ã«ã¤ã„ã¦
- no planæ ªå¼ä¼šç¤¾ã¯ **ã€Œãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã®åŠ›ã§ZEROã‹ã‚‰æœªæ¥ã‚’å‰µé€ ã™ã‚‹ã€ç²¾é‹­ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼é›†å›£ã€** ã§ã™ã€‚
- ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³/AIæŠ€è¡“ã‚’ã¯ã˜ã‚ã¨ã—ãŸã€Webã‚µã‚¤ãƒˆé–‹ç™ºã€ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªé–‹ç™ºã€ãƒãƒ¼ãƒ è‚²æˆã€ãªã©Webã‚µãƒ¼ãƒ“ã‚¹å…¨èˆ¬ã®é–‹ç™ºã‹ã‚‰é‹ç”¨ã‚„æ•™è‚²ã€æ”¯æ´ãªã©ã‚‚è¡Œã£ã¦ã„ã¾ã™ã€‚ã‚ˆãã‚ã‹ã‚‰ãªã„ã€ãµã‚ãµã‚ã—ãŸãƒãƒ¼ãƒ—ãƒ©ãƒ³çŠ¶æ…‹ã§ã‚‚å¤§ä¸ˆå¤«ï¼ã”ä¸€ç·’ã«ãƒ—ãƒ©ãƒ³ã‚’ç«‹ã¦ã¦ã„ãã¾ã—ã‚‡ã†ï¼
- [no planæ ªå¼ä¼šç¤¾ã«ã¤ã„ã¦](https://noplan-inc.com)
- [no planæ ªå¼ä¼šç¤¾ | web3å®Ÿç¸¾](https://noplan-inc.com/web3)
- [no planæ ªå¼ä¼šç¤¾ | ãƒ–ãƒ­ã‚°ä¸€è¦§](https://noplan-inc.com/blog)

ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®æ¡ç”¨ã‚‚ç©æ¥µçš„ã«è¡Œãªã£ã¦ã„ã¾ã™ã®ã§ã€èˆˆå‘³ãŒã‚ã‚‹æ–¹ã¯æ˜¯éã”é€£çµ¡ãã ã•ã„ï¼
- [CTOã®DMã¯ã“ã¡ã‚‰](https://twitter.com/_serinuntius)

## å‚è€ƒæ–‡çŒ®

https://docs.substrate.io/tutorials/build-a-blockchain/
https://docs.substrate.io/tutorials/build-application-logic/
https://docs.substrate.io/tutorials/build-application-logic/add-a-pallet/
https://docs.substrate.io/tutorials/collectibles-workshop/03-create-pallet/